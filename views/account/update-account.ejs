<main class="account-management">

    <h1><%= title %></h1>

    <% if (messages) { %>
        <% Object.keys(messages).forEach(type => { %>
        <div class="<%= type %>">
            <% messages[type].forEach(msg => { %>
            <p><%= msg %></p>
            <% }) %>
        </div>
        <% }) %>
    <% } %>

    <% if (errors && errors.length > 0) { %>
    <ul class="notice">
        <% errors.forEach(error => { %>
        <li><%= error.msg %></li> 
        <% }) %>
    </ul>
    <% } %>

    <!-- Account Update Form -->
    <form action="/account/update" method="POST" novalidate>
        <input type="hidden" name="account_id" value="<%= accountData.account_id %>">

        <label for="first_name">First Name</label>
        <input type="text" id="first_name" name="account_firstname" required
            pattern="^[A-Za-zÀ-ÿ\s\-]{2,}$"
            title="Please enter a valid first name (letters, spaces, and dashes only)."
            value="<%= accountData.account_firstname %>">

        <label for="last_name">Last Name</label>
        <input type="text" id="last_name" name="account_lastname" required
            pattern="^[A-Za-zÀ-ÿ\s\-]{2,}$"
            title="Please enter a valid last name (letters, spaces, and dashes only)."
            value="<%= accountData.account_lastname %>">

        <label for="email">Email</label>
        <input type="email" id="email" name="account_email" required
            value="<%= accountData.account_email %>">

        <button type="submit" name="action" value="update">Update Account</button>
    </form>

<hr>

    <!-- Change Password Form -->
    <form action="/account/update-password" method="POST" novalidate>
        <input type="hidden" name="account_id" value="<%= account.account_id %>">

        <label for="new_password">New Password</label>
        <input type="password" id="new_password" name="new_password" minlength="8"
        pattern="^(?=.*[A-Z])(?=.*\d)(?=.*[\W_]).{8,}$"
        title="Password must be at least 8 characters and include an uppercase letter, a number, and a special character.">

        <small>
        Enter a new password to change the current one.<br>
        Must be 8+ chars, with uppercase, number &amp; special character.
        </small>

        <button type="submit" name="action" value="change_password">Change Password</button>
    </form>

</main>